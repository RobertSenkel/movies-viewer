<div *ngIf="loading$ | async" class="spinner-container">
  <mat-spinner></mat-spinner>
</div>

<div *ngIf="!(loading$ | async)">
  <ng-container *ngIf="(movies$ | async) as movies">
    <div class="movies-grid">
      <mat-card color="secondary" *ngFor="let movie of movies" class="movie-card" (click)="onSelect(movie)" tabindex="0"
        role="button">
        <img mat-card-image [src]="'https://image.tmdb.org/t/p/w342' + movie.poster_path" [alt]="movie.title"
          *ngIf="movie.poster_path; else noPoster" />
        <ng-template #noPoster>
          <div class="no-poster">No Poster</div>
        </ng-template>
        <mat-card-title>
          <div class="card-title">
            <div>{{ movie.title }}</div>
            <div class="release">from {{ movie.release_date | date:'d MMMM yyyy' }}</div>
          </div>
        </mat-card-title>
      </mat-card>
    </div>
  </ng-container>
</div>
<ng-container *ngIf="(pagination$ | async) as pagination">
  <mat-paginator #paginator
    class="paginator"
    [length]="pagination.total_results"
    [pageSize]="20"
    [showFirstLastButtons]="true"
    [pageIndex]="pagination.page - 1"
    (page)="handlePageEvent($event)"
    aria-label="Select page">
  </mat-paginator>
</ng-container>